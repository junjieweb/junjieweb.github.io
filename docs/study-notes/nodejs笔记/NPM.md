---
sidebar_position: 2
---

# åŒ…ç®¡ç†å™¨

## NPM

**NPM**(Node Package Manager), Node çš„åŒ…ç®¡ç†å™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚å®‰è£…å®Œ nodejs ä¹‹åä¼šè‡ªåŠ¨å®‰è£… npmã€‚

Node.js çš„åŒ…åŸºæœ¬éµå¾ª CommonJS è§„èŒƒï¼Œå°†ä¸€ç»„ç›¸å…³çš„æ¨¡å—ç»„åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„å·¥å…·ã€‚
é€šè¿‡ NPM å¯ä»¥å¯¹ Node çš„å·¥å…·åŒ…è¿›è¡Œæœç´¢ã€ä¸‹è½½ã€å®‰è£…ã€åˆ é™¤ã€ä¸Šä¼ ã€‚å€ŸåŠ©åˆ«äººå†™å¥½çš„åŒ…ï¼Œå¯ä»¥è®©æˆ‘ä»¬çš„å¼€å‘æ›´åŠ æ–¹ä¾¿ã€‚

`node_modules` ç›®å½•æ˜¯ä¸èƒ½è¿›å…¥ Git ä»“åº“çš„

æŸ¥çœ‹ npm çš„ç‰ˆæœ¬ `npm -v`ã€‚
åˆå§‹åŒ– `npm init` æˆ– `npm init --yes`ã€‚
è¿è¡Œåä¼šåˆ›å»º `package.json` é…ç½®æ–‡ä»¶ã€‚

```json
{
  "name": "1-npm",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "",
  "license": "ISC"
}
```

:::tip æ³¨æ„ï¼š
ç”Ÿæˆçš„åŒ…åä¸èƒ½ä½¿ç”¨ä¸­æ–‡ã€å¤§å†™ï¼     
ä¸èƒ½ä½¿ç”¨ npm ä½œä¸ºåŒ…çš„åå­—
:::

[å…³äºå¼€æºè¯ä¹¦æ‰©å±•é˜…è¯»](http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html)

æœç´¢åŒ… `npm search jquery` æˆ– `npm s jquery`
ä¸€èˆ¬åœ¨æœç´¢å·¥å…·åŒ…çš„æ—¶å€™ï¼Œä¼šåˆ° https://www.npmjs.com/ æœç´¢

**å®‰è£…å·¥å…·åŒ…** `npm install jquery` æˆ– `npm i jquery`

```shell
# å®‰è£…å¹¶åœ¨ package.json ä¸­ä¿å­˜åŒ…çš„ä¿¡æ¯(dependencies å±æ€§)
npm install jquery --save
npm install jquery -S
 
# å®‰è£…å¹¶åœ¨ package.json ä¸­ä¿å­˜åŒ…çš„ä¿¡æ¯(devDependencies å±æ€§)
npm install babel --save-dev
npm install babel -D
```

**å…¨å±€å®‰è£…** `npm install less -g` `npm install nodemon -g`

å…¨å±€å®‰è£…ä¸€èˆ¬ç”¨äºå®‰è£…å…¨å±€å·¥å…·ï¼Œå¦‚ `cnpm`ï¼Œ`yarn`ï¼Œ`webpack`ï¼Œ`gulp` ç­‰ã€‚
å…¨å±€å®‰è£…å‘½ä»¤åœ¨ä»»æ„çš„å‘½ä»¤è¡Œä¸‹, éƒ½å¯ä»¥æ‰§è¡Œã€‚  
`npm root -g` æŸ¥çœ‹å…¨å±€å®‰è£…çš„ç›®å½•çš„ä½ç½®ï¼Œå…¨å±€å‘½ä»¤çš„å®‰è£…ä½ç½® `C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Roaming\npm`

**å®‰è£…ä¾èµ–** æ ¹æ® package.json ä¸­çš„ä¾èµ–å£°æ˜ï¼Œ å®‰è£…å·¥å…·åŒ…

- `npm i`
- `npm install`
- `npm i --production` // åªå®‰è£… dependencies ä¸­çš„ä¾èµ–

**ç§»é™¤åŒ…** `npm remove jquery`

**ä½¿ç”¨æµç¨‹**

1. å®šä½åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹(æ–°å»ºæˆ–è€…å·²ç»å­˜åœ¨çš„)
2. å¯åŠ¨å‘½ä»¤è¡Œå°†å·¥ä½œç›®å½•å®šä½åˆ°ç¬¬ä¸€æ­¥çš„æ–‡ä»¶ä¸­çš„
3. è¿è¡Œ `npm init` (åªéœ€è¦è¿è¡Œä¸€æ¬¡)
4. è¿è¡Œ `npm i åŒ…å` å®‰è£…å·¥å…·åŒ…

**npmæ¸…é™¤ç¼“å­˜**

npm i å®‰è£…åŒ…é”™è¯¯çš„æ—¶å€™, å¯ä»¥å°è¯•è¿è¡Œ `npm cache clean`

**ä½¿ç”¨npmæ‰§è¡Œè„šæœ¬**

1. ç¼–å†™jsè„šæœ¬
2. é…ç½®package.jsonï¼ˆå¦‚æœæ²¡æœ‰package.json, åˆ™è¿è¡Œ npm initï¼‰
3. æ·»åŠ scriptä¸­çš„å±æ€§
    ```json
    {
      "scripts": {
        "test": "echo \"Error: no test specified\" && exit 1",
        "server": "node app.js"
      }
    }
    ```
4. é…ç½®`package.json` åå°±å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ `npm run server` è¿è¡Œ app.js


**å°è£…NPMåŒ…**ï¼ˆåˆ›å»ºè‡ªå·±çš„ NPM åŒ…å¯ä»¥å¸®åŠ©ä»£ç è¿›è¡Œè¿­ä»£è¿›åŒ–ï¼Œä½¿ç”¨æ­¥éª¤ä¹Ÿæ¯”è¾ƒç®€å•ï¼‰

1. ä¿®æ”¹ä¸ºå®˜æ–¹çš„åœ°å€ `npm config set registry https://registry.npmjs.org/`
2. åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºæ–‡ä»¶ `index.js`ï¼Œ åœ¨æ–‡ä»¶ä¸­å£°æ˜å‡½æ•°ï¼Œä½¿ç”¨ `module.exports` æš´éœ²
3. npm åˆå§‹åŒ–å·¥å…·åŒ…ï¼Œ`package.json` å¡«å†™åŒ…çš„ä¿¡æ¯
4. è´¦å·æ³¨å†Œï¼ˆæ¿€æ´»è´¦å·ï¼‰,==å®Œæˆé‚®ç®±éªŒè¯==
5. å‘½ä»¤è¡Œä¸‹ ã€`npm login`ã€ å¡«å†™ç›¸å…³ç”¨æˆ·ä¿¡æ¯ (ä¸€å®šè¦åœ¨åŒ…çš„æ–‡ä»¶å¤¹ä¸‹è¿è¡Œ)
6. å‘½ä»¤è¡Œä¸‹ã€ `npm publish`ã€ æäº¤åŒ… ğŸ‘Œ

- npm æœ‰åƒåœ¾æ£€æµ‹æœºåˆ¶ï¼Œå¦‚æœåå­—ç®€å•æˆ–åšæµ‹è¯•æäº¤ï¼Œå¾ˆå¯èƒ½ä¼šè¢«æ‹’ç»æäº¤
- å¯ä»¥å°è¯•æ”¹ä¸€ä¸‹åŒ…çš„åç§°æ¥è§£å†³è¿™ä¸ªé—®é¢˜
- å‡çº§ NPM åŒ…ï¼Œéœ€è¦ä¿®æ”¹ package.json ä¸­çš„ç‰ˆæœ¬å·ä¿®æ”¹ï¼Œåªéœ€è¦æ‰§è¡Œã€npm publishã€å°±å¯ä»¥èƒ½æäº¤
    1. ä¿®æ”¹åŒ…ä»£ç 
    2. ä¿®æ”¹ package.json ä¸­ç‰ˆæœ¬å·
    3. npm publish æäº¤

**åˆ é™¤NPMåŒ…** `npm unpublish åŒ…å --force`

**npmé…ç½®é•œåƒåœ°å€**

```shell
//æ·˜å®é•œåƒ
npm config set registry https://registry.npm.taobao.org
//å®˜æ–¹é•œåƒ   
npm config set registry https://registry.npmjs.org/
```

:::tip
åœ¨å‘å¸ƒå·¥å…·çš„æ—¶å€™, ä¸€å®šè¦å°†ä»“åº“åœ°å€ä¿®æ”¹ä¸ºå®˜æ–¹çš„åœ°å€
:::

## CNPM

cnpm æ˜¯æ·˜å®å¯¹å›½å¤– npm æœåŠ¡å™¨çš„ä¸€ä¸ªå®Œæ•´é•œåƒç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯æ·˜å® npm é•œåƒï¼Œç½‘ç«™åœ°å€ `http://npm.taobao.org/`

**å®‰è£…** `npm install -g cnpm --registry=https://registry.npm.taobao.org`

**ä½¿ç”¨** é…ç½®å®Œæˆåï¼Œå°±å¯ä»¥ä½¿ç”¨ cnpm å‘½ä»¤æ¥ç®¡ç†åŒ…ï¼Œä½¿ç”¨æ–¹æ³•è·Ÿ npm ä¸€æ · `cnpm install lodash`

cnpm å®‰è£…æ—¶ä¸€å®šè¦åŠ  -S é€‰é¡¹

## yarn

**yarn** æ˜¯ Facebook å¼€æºçš„æ–°çš„åŒ…ç®¡ç†å™¨ï¼Œå¯ä»¥ç”¨æ¥ä»£æ›¿ npmã€‚

**yarn ç›¸æ¯”äº npm æœ‰å‡ ä¸ªç‰¹ç‚¹**

- æœ¬åœ°ç¼“å­˜ã€‚å®‰è£…è¿‡çš„åŒ…ä¸‹æ¬¡ä¸ä¼šè¿›è¡Œè¿œç¨‹å®‰è£…
- å¹¶è¡Œä¸‹è½½ã€‚ä¸€æ¬¡ä¸‹è½½å¤šä¸ªåŒ…ï¼Œè€Œ npm æ˜¯ä¸²è¡Œä¸‹è½½
- ç²¾å‡†çš„ç‰ˆæœ¬æ§åˆ¶ã€‚ä¿è¯æ¯æ¬¡å®‰è£…è·Ÿä¸Šæ¬¡éƒ½æ˜¯ä¸€æ ·çš„

**å®‰è£…** `npm install --global yarn`

**ç›¸å…³å‘½ä»¤**

1. `yarn --version`
2. `yarn init` //ç”Ÿæˆpackage.json
3. `yarn global add package` ï¼ˆå…¨å±€å®‰è£…ï¼‰ å…¨å±€å®‰è£…è·¯å¾„ï¼š`C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Local\Yarn\bin`
4. `yarn global remove less` ï¼ˆå…¨å±€åˆ é™¤ï¼‰
5. `yarn add package` ï¼ˆå±€éƒ¨å®‰è£…ï¼‰
6. `yarn add package --dev` ï¼ˆç›¸å½“äºnpmä¸­çš„--save-devï¼‰
7. `yarn remove package`
8. `yarn list` //åˆ—å‡ºå·²ç»å®‰è£…çš„åŒ…å ç”¨çš„å¾ˆå°‘
9. `yarn info packageName` //è·å–åŒ…çš„æœ‰å…³ä¿¡æ¯ å‡ ä¹ä¸ç”¨
10. `yarn` //å®‰è£…package.jsonä¸­çš„æ‰€æœ‰ä¾èµ–

**yarn ä¿®æ”¹ä»“åº“åœ°å€** `yarn config set registry https://registry.npm.taobao.org`

## Cyarn

è·Ÿ npm ä¸ cnpm çš„å…³ç³»ä¸€æ ·ï¼Œå¯ä»¥ä¸º yarn è®¾ç½®å›½å†…çš„æ·˜å®é•œåƒï¼Œæå‡å®‰è£…çš„é€Ÿåº¦ã€‚é…ç½®åï¼Œåªéœ€å°†yarnæ”¹ä¸ºcyarnä½¿ç”¨å³å¯ã€‚

`npm install cyarn -g --registry "https://registry.npm.taobao.org"`

`yarn.lock` ä¸ `package-lock.json` é”æ–‡ä»¶ï¼Œç”¨æ¥é”ä½ç‰ˆæœ¬

`package.json` ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯åšé¡¹ç›®çš„æ—¶å€™, ä¸€å®šè¦æœ‰å®ƒã€‚

## å…³äºç‰ˆæœ¬å·

ç‰ˆæœ¬æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·

- "^3.0.0" ï¼šé”å®šä¸»ç‰ˆæœ¬ï¼Œä»¥åå®‰è£…åŒ…çš„æ—¶å€™ï¼Œä¿è¯åŒ…æ˜¯3.x.xç‰ˆæœ¬ï¼Œxé»˜è®¤å–æœ€æ–°çš„ã€‚
- "~3.2.x" ï¼šé”å®šå°ç‰ˆæœ¬ï¼Œä»¥åå®‰è£…åŒ…çš„æ—¶å€™ï¼Œä¿è¯åŒ…æ˜¯3.1.xç‰ˆæœ¬ï¼Œxé»˜è®¤å–æœ€æ–°çš„ã€‚
- "3.1.1" ï¼šé”å®šå®Œæ•´ç‰ˆæœ¬ï¼Œä»¥åå®‰è£…åŒ…çš„æ—¶å€™ï¼Œä¿è¯åŒ…å¿…é¡»æ˜¯3.1.1ç‰ˆæœ¬ã€‚

å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„å·¥å…·åŒ… `yarn add jquery@1.11.2`
